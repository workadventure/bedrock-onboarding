import{a as i,b as l}from"./actions-17e0e468.js";import{i as d}from"./world-8ddf1c24.js";import{i as f,a as u,b as m,d as b,e as g}from"./index-7bb314c0.js";console.log("Town script started successfully");function h(){k("coucou")}const k=o=>{i("todos",{title:o,done:!1}).then(()=>{console.log("New to-do added:",o)}).catch(console.error)};let n=!0,s={hr:{access:!0,blockingTiles:[[80,74],[81,74],[82,74],[83,74]]},arcade:{access:!1,blockingTiles:[[16,116],[17,116],[18,116],[19,116]]},stadium:{access:!1,blockingTiles:[[18,77],[19,77],[20,77]]},wikitek:{access:!1,blockingTiles:[[77,110],[78,110],[79,110],[80,110],[81,110],[82,110]]},streaming:{access:!1,blockingTiles:[[69,40],[70,40],[71,40],[72,40]]},cave:{access:!1,blockingTiles:[[49,11],[50,11]]},backstage:{access:!1,blockingTiles:[[29,49],[30,49],[29,51],[30,51]]}};function T(o,c,a){if(c.includes("guest"))Object.keys(s).forEach(e=>{s[e].access=e==="hr"||e==="arcade"});else if(c.some(e=>["fr","pt","ext","alt"].includes(e))){const e=f(a);s.stadium.access=!0,s.cave.access=!0,s.hr.access=!0,s.arcade.access=e,s.streaming.access=e,s.wikitek.access=e,s.backstage.access=e}else c.some(e=>["admin","br","hr"].includes(e))&&Object.keys(s).forEach(e=>{s[e].access=!0});o==="town"?(t("hr"),t("arcade"),t("stadium"),t("wikitek"),t("streaming"),t("cave"),t("backstage")):o==="world"&&t("cave")}function t(o){s[o].access?WA.room.area.onEnter(`${o}Door`).subscribe(()=>{A(o),n===!0?(n=!1,WA.room.hideLayer(`roofs/${o}1`),WA.room.hideLayer(`roofs/${o}2`)):(n=!0,WA.room.showLayer(`roofs/${o}1`),WA.room.showLayer(`roofs/${o}2`))}):(p(o),WA.room.area.onEnter(`${o}Door`).subscribe(()=>{u("You are not qualified to enter here.")}),WA.room.area.onLeave(`${o}Door`).subscribe(()=>{m()}))}function p(o){const a=s[o].blockingTiles.map(([e,r])=>({x:e,y:r,tile:"collision",layer:"collisions"}));WA.room.setTiles(a)}function A(o){const a=s[o].blockingTiles.map(([e,r])=>({x:e,y:r,tile:null,layer:"collisions"}));WA.room.setTiles(a)}console.log("Main script started successfully");WA.onInit().then(()=>{console.log("Scripting API ready");const o=WA.player.tags;console.log("Player tags: ",o),o.includes("guest")||(WA.controls.disableInviteButton(),b()),l().then(()=>{console.log("Scripting API Extra ready");const c=WA.state.loadVariable("map");c==="town"?h():c==="world"&&d();const a=WA.player.state.checkpoints;T(c,o,a),g(c,o,a),(r=>{i("todos",{title:r,done:!1}).then(()=>{console.log("New to-do added:",r)}).catch(console.error)})("coucou")}).catch(c=>console.error(c))}).catch(o=>console.error(o));
